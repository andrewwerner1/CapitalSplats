"function"===typeof jQuery&&function(d){function l(){var a=d(this).data("jmkMainMenuState");a.$allSubMenus.children("li.MenuItemSelected").trigger("hideSubMenu");a.$menuBarItems.filter("li.MenuItemSelected").trigger("unselect")}function m(){var a=d(this),c=a.find("ul.SubMenu"),a=a.find("li.MenuItemSelected");c.hide();a.each(function(){d(this).trigger("unselect")})}function n(){var a=d(this),c=a.closest("ul.Menu").closest("div").data("jmkMainMenuState"),b=a.children("ul.SubMenu"),e=b.children("li.MenuItem"),
k=a.outerWidth(),h=b.outerWidth(),i=d(window).width();d(window).height();var g=d(window).scrollLeft();d(window).scrollTop();var f=a.offset(),j=0;if("Menu"==a.parent().get(0).className){if(parseInt(f.left)+h>i-c.viewportPadding+g?(a=parseInt(f.left)+h-(i-c.viewportPadding+g),b.css("left",-a)):b.css("left","0"),parseInt(f.left)<g+c.viewportPadding)a=g+c.viewportPadding-parseInt(f.left),b.css("left",a)}else b.css("left",k+c.subMenuOffsetX).css("top",c.subMenuOffsetY),(parseInt(a.parent().css("left"))<
c.subMenuOffsetX||parseInt(f.left)+k+h>i-c.viewportPadding)&&b.css("left",-(h+c.subMenuOffsetX)),parseInt(a.parent().css("left"))<c.subMenuOffsetX&&parseInt(f.left)-h<g+c.viewportPadding&&(a=g+c.viewportPadding-parseInt(f.left),b.css("left",a));b.fadeIn(250);e.each(function(){var a=d(this);a.width()>j&&(j=a.width())});b.width(j);e.css("width",b.eq(0).innerWidth());o.apply(e)}function p(){var a=d(this),c=a.data("jmkMainMenuState").$menuBarItems,b=c.eq(0).parent(),e=0;c.each(function(){var a=d(this);
e+=a.width()});e<b.width()?(a=(b.width()-e)/c.length,a+=a/c.length-4,c.children("a").not("a:last").css("margin-right",a+"px")):(b.css("width",e+1+"px"),a.css("width",b.outerWidth()))}function o(){d(this).has("ul").each(function(){var a=d(this).children("a");if(0===a.has(".MenuItemArrow").length){a.append('<div class="MenuItemArrow"></div>');var c=a.children(".MenuItemArrow");c.css("top",a.innerHeight()/2-c.outerHeight()/2)}})}d.fn.jmkMainMenu=function(a){return this.each(function(){a=d.extend(!0,
{subMenuOffsetX:-3,subMenuOffsetY:-1,viewportPadding:5},a);var c=d(this),b=c.children("ul.Menu"),e=b.children("li.MenuItem"),b=b.add(c.find("ul.SubMenu"));d(b).each(function(){var a=d(this),b=a.children("li.MenuItem");a.bind("mouseleave focusout",function(a){a.stopPropagation();a=d(this);"Menu"!=a.get(0).className&&a.children("li.MenuItemSelected").trigger("unselect");c.data("jmkMainMenuState").hideTimerID=setTimeout(function(){l.apply(c)},500)});a.bind("mouseenter focusin",function(a){a.stopPropagation();
clearTimeout(c.data("jmkMainMenuState").hideTimerID)});b.each(function(){var b=d(this),e=b.children("a");b.bind("hideSubMenu",function(a){a.stopPropagation();a=d(this);0<a.children("ul.SubMenu:visible").length&&m.apply(a)});b.bind("showSubMenu",function(a){a.stopPropagation();a=d(this);a.siblings().children("ul.SubMenu").parent().trigger("hideSubMenu");0<a.has("ul.SubMenu").length&&n.apply(a)});b.bind("select",function(a){var b=d(this);b.addClass("MenuItemSelected");b.children("a").children("div.MenuItemArrow").addClass("MenuItemArrowSelected");
b.children("a").addClass("MenuItemSelected");b.siblings(".MenuItemSelected").trigger("unselect");"Menu"==b.parent().get(0).className&&a.stopPropagation()});b.bind("unselect",function(a){a.stopPropagation();a=d(this);a.removeClass("MenuItemSelected");a.children("a").children("div.MenuItemArrow").removeClass("MenuItemArrowSelected");a.children("a").removeClass("MenuItemSelected")});e.bind("mouseenter focusin",function(){clearTimeout(c.data("jmkMainMenuState").hideTimerID);clearTimeout(c.data("jmkMainMenuState").showTimerID);
b.trigger("select");"Menu"==b.parent().get(0).className?b.trigger("showSubMenu"):c.data("jmkMainMenuState").showTimerID=setTimeout(function(){b.trigger("showSubMenu")},250)});e.bind("touchstart",function(b){b.stopPropagation();clearTimeout(c.data("jmkMainMenuState").hideTimerID);clearTimeout(c.data("jmkMainMenuState").showTimerID);b=d(this);b.unbind("mouseenter");b.unbind("focusin");b.unbind("mouseover");b.unbind("mouseleave");b.unbind("focusout");b.unbind("mouseout");a.unbind("mouseleave");a.unbind("mouseout");
a.unbind("focusout");a.unbind("mouseenter");a.unbind("mouseover");a.unbind("focusin")});e.bind("click",function(a){a.stopPropagation();clearTimeout(c.data("jmkMainMenuState").hideTimerID);clearTimeout(c.data("jmkMainMenuState").showTimerID);d(this);if(b.children("ul.SubMenu").length&&0===b.children("ul.SubMenu:visible").length){var e=b.children("ul.SubMenu").eq(0);0===e.children("li.MenuItem").children(".CloseSubMenuItem").length&&(e.append('<li class="MenuItem"><a href="" class="CloseSubMenuItem" style="text-align:center;">[Close]</a></li>'),
e.children("li.MenuItem").children("a.CloseSubMenuItem").bind("click",function(a){a.stopPropagation();clearTimeout(c.data("jmkMainMenuState").hideTimerID);clearTimeout(c.data("jmkMainMenuState").showTimerID);b.trigger("hideSubMenu");b.trigger("unselect");a.preventDefault();return!1}));b.trigger("select");b.trigger("showSubMenu");a.preventDefault();return!1}b.trigger("select");b.trigger("showSubMenu")})})});c.data("jmkMainMenuState",{$menuBarItems:e,$allSubMenus:b,showTimerID:0,hideTimerID:0,subMenuOffsetX:a.subMenuOffsetX,
subMenuOffsetY:a.subMenuOffsetY,viewportPadding:a.viewportPadding});p.apply(c)})}}(jQuery);